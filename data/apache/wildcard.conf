<VirtualHost *:80>
  ServerAlias *.public.test
  VirtualDocumentRoot /var/www/html/%1
  <Directory "/var/www/html">
    DirectoryIndex index.php index.html
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
  </Directory>
  <FilesMatch \.php$>
    <if "-f '%{DOCUMENT_ROOT}/php8.0'">
      SetHandler "proxy:fcgi://php-8.0:9000"
    </if>
    <if "-f '%{DOCUMENT_ROOT}/php8.1'">
      SetHandler "proxy:fcgi://php-8.1:9000"
    </if>
    <if "-f '%{DOCUMENT_ROOT}/php8.2'">
      SetHandler "proxy:fcgi://php-8.2:9000"
    </if>
  </FilesMatch>
</VirtualHost>

<VirtualHost *:80>
  ServerAlias *.test
  VirtualDocumentRoot /var/www/html/%1
  <Directory "/var/www/html">
    DirectoryIndex index.php index.html
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
  </Directory>
  <FilesMatch \.php$>
    <if "-f '%{DOCUMENT_ROOT}/php8.0'">
      SetHandler "proxy:fcgi://php-8.0:9000"
    </if>
    <if "-f '%{DOCUMENT_ROOT}/php8.1'">
      SetHandler "proxy:fcgi://php-8.1:9000"
    </if>
    <if "-f '%{DOCUMENT_ROOT}/php8.2'">
      SetHandler "proxy:fcgi://php-8.2:9000"
    </if>
  </FilesMatch>
</VirtualHost>